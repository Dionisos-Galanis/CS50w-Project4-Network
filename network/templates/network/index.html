{% extends "network/layout.html" %}
{% load static %}

{% block body %}

    {% if list_type == "All Posts" %}
        <h2>All Posts</h2>
    {% elif list_type == "User Profile" %}
        <h2 class="inline">{{ page_user.username | title }} Profile</h2>
        {% if not user == page_user %}
            {% if page_user in user.follow %}
                <button id="follow-switch" class="inline btn btn-primary" data-state="Unfollow">Unfollow</button>
            {% else %}
                <button id="follow-switch" class="inline btn btn-primary" data-state="Follow">Follow</button>
            {% endif %}
        {% endif %}
        <div id="n-followers">{{ page_user.username | title }} has {{ n_followers }} followers</div>
    {% endif %}

    {% if user.is_authenticated and list_type == "All Posts" %}

        <div class="card">
            <div class="card-header">
                <h3>New post</h3>
            </div>
            <div class="card-body">
                <form action="{% url 'index' %}" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        {{ add_post_form.text }}
                    </div>
                    <input class="btn btn-primary" type="submit" value="Post" name="Post">
                </form>
            </div>
        </div>

    {% endif %}

    {% for post in posts_to_display %}

        <div class="post-div card">

            <div class="post-author card-header">
                <a href="{% url 'user_page' post.author.pk %}"><h3>{{ post.author.username }}</h3></a>
            </div>

            <div class="card-body">

                <div class="post-text card-text">
                    <p>{{ post.text }}</p>
                </div>

                <div class="post-date-time">
                    <p>Posted: {{ post.date_time }}</p>
                </div>

                <div class="post-likes">
                    <span> 
                        {% if user.is_authenticated %}
                            <a href=""> <!--  url 'like_switch' post.pk  -->
                                {% if true %}
                                    <img class="heart" src="{% static 'network/filledheart.png' %}">
                                {% else %}
                                    <img class="heart" src="{% static 'network/emptyheart.png' %}">
                                {% endif %}
                            </a> 
                        {% else %}
                            <img class="heart" src="{% static 'network/filledheart.png' %}">
                        {% endif %}
                    </span>
                    <span class="likes-number">{{ post.n_likes }} likes</span>
                </div>

            </div>

            <div class="comments card-footer"></div>

        </div>

    {% empty %}

        <h5>No posts here ...</h5>

    {% endfor %}

{% endblock %}